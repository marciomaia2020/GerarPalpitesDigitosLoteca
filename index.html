<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loteca - Gerador de Palpites Avan√ßado</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        loteca: '#0066B3',
                        'loteca-red': '#F81A03',
                        'loteca-light': '#4285d6',
                        'loteca-dark': '#004a85',
                        'loteca-bg': '#f0f7ff'
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        .loading-circle {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #0066B3, #F81A03, #4285d6);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        .jogo-loteca {
            background: linear-gradient(to right, #f0f7ff, #ffffff);
            border: 2px solid #0066B3;
            border-radius: 12px;
            padding: 16px;
            margin: 8px 0;
        }
        
        .opcao-resultado {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s;
            border: 3px solid transparent;
            margin: 2px;
        }
        
        .opcao-1 {
            background: linear-gradient(135deg, #0066B3, #4285d6);
            color: white;
        }
        
        .opcao-x {
            background: linear-gradient(135deg, #6b7280, #9ca3af);
            color: white;
        }
        
        .opcao-2 {
            background: linear-gradient(135deg, #F81A03, #ff4444);
            color: white;
        }
        
        .opcao-resultado:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0, 102, 179, 0.3);
        }
        
        .opcao-resultado.selecionado {
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.5);
            border-color: #22c55e;
        }
        
        .jogo-card {
            background: linear-gradient(to right, #f0f7ff, #ffffff);
            border: 2px solid #0066B3;
            border-radius: 12px;
            padding: 16px;
            margin: 8px 0;
        }
        
        .resultado-jogo {
            width: 35px;
            height: 35px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            color: white;
        }
        
        .resultado-1 {
            background: linear-gradient(135deg, #0066B3, #4285d6);
        }
        
        .resultado-x {
            background: linear-gradient(135deg, #6b7280, #9ca3af);
        }
        
        .resultado-2 {
            background: linear-gradient(135deg, #F81A03, #ff4444);
        }
        
        .custo-total {
            background: linear-gradient(45deg, #0066B3, #004a85);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 18px;
        }

        .acerto-badge {
            background: linear-gradient(45deg, #22c55e, #16a34a);
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: bold;
        }

        /* Contador de resultados com anima√ß√£o */
        .contador-destaque {
            animation: bounce 1s ease-in-out;
        }
        
        .meta-atingida {
            background: linear-gradient(45deg, #10b981, #34d399) !important;
            color: white;
            animation: pulse 1s infinite;
        }
        
        .meta-excedida {
            background: linear-gradient(45deg, #ef4444, #f87171) !important;
            color: white;
            animation: pulse 0.5s infinite;
        }
    </style>
</head>
<body class="bg-loteca-bg min-h-screen">
    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <div class="text-center mb-6">
            <h1 class="text-4xl font-bold text-loteca mb-2">‚öΩ LOTECA</h1>
            <p class="text-gray-600">Gerador de Palpites com An√°lise de Jogos</p>
        </div>

        <!-- Loading -->
        <div id="loading" class="text-center py-8">
            <div class="loading-circle mx-auto mb-4"></div>
            <p class="text-loteca font-medium">Carregando √∫ltimo resultado...</p>
        </div>

        <!-- √öltimo Resultado -->
        <div id="ultimoResultado" class="hidden mb-6">
            <div class="bg-white rounded-lg shadow-lg overflow-hidden border-2 border-loteca">
                <div class="bg-loteca text-white p-4 text-center">
                    <h2 id="tituloResultado" class="text-xl font-bold">Concurso 1205</h2>
                    <div id="dataResultado" class="text-sm">üìÖ 04/08/2025 (Domingo)</div>
                </div>
                
                <div class="p-6">
                    <div class="mb-4">
                        <h3 class="text-lg font-bold text-loteca mb-3 text-center">Jogos e Resultados</h3>
                        <div id="jogosResultado" class="space-y-2">
                            <!-- Jogos e resultados ser√£o inseridos aqui -->
                        </div>
                    </div>
                    
                    <div id="statusResultado" class="text-lg font-bold mb-4 text-red-600 text-center">
                        ACUMULOU!
                    </div>
                    
                    <div class="text-center mb-4">
                        <div class="text-lg text-gray-700 mb-2">
                            Ningu√©m acertou os 14 jogos
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div class="flex items-center justify-center">
                            <span class="text-loteca mr-2">üèÜ</span>
                            <span>1¬∫ (14 acertos): 0 ganhadores - R$ 0,00</span>
                        </div>
                        <div class="flex items-center justify-center">
                            <span class="text-loteca mr-2">üèÜ</span>
                            <span>2¬∫ (13 acertos): 1 ganhador - R$ 170.254,63</span>
                        </div>
                    </div>
                    
                    <div class="mt-4 text-center">
                        <div class="text-sm text-gray-600">Pr√≥ximo Sorteio: Concurso 1206</div>
                        <div class="text-sm text-gray-600">09/08/2025 (Sexta)</div>
                        <div class="text-2xl font-bold text-loteca mt-2">
                            Pr√™mio Estimado: R$ 3.500.000,00
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interface Principal - Dividida em 2 Colunas -->
        <div id="interfacePrincipal" class="hidden grid grid-cols-1 xl:grid-cols-2 gap-6">
            
            <!-- LADO ESQUERDO: Cria√ß√£o de Jogos -->
            <div class="space-y-6">
                <!-- Controles do Jogo -->
                <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-loteca">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-loteca">üéÆ Criar Novo Jogo</h3>
                        <button id="comoFuncionaBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm">
                            ‚ùì Como Funciona
                        </button>
                    </div>
                    
                    <!-- Informa√ß√£o do Jogo -->
                    <div class="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                        <div class="text-sm font-medium text-blue-800 mb-2">‚öΩ Regras da Loteca:</div>
                        <div class="text-xs text-blue-700">
                            Palpite o resultado de <strong>14 jogos</strong> de futebol: <strong>1</strong> (visitante), <strong>X</strong> (empate), <strong>2</strong> (mandante).
                            Custo: <strong>R$ 3,00</strong> por jogo.
                        </div>
                    </div>

                    <!-- üéØ CONTADOR DE DISTRIBUI√á√ÉO DE RESULTADOS BEM DESTACADO -->
                    <div class="mb-6 p-5 bg-gradient-to-br from-blue-50 via-gray-50 to-red-50 border-4 border-yellow-400 rounded-xl shadow-lg">
                        <div class="text-xl font-bold text-gray-800 mb-4 text-center">‚öΩ ESTRAT√âGIA: DISTRIBUI√á√ÉO DE RESULTADOS</div>
                        
                        <!-- Estat√≠stica do √öltimo Concurso -->
                        <div id="estatisticaUltimoConcurso" class="mb-4 p-3 bg-yellow-100 border border-yellow-300 rounded-lg text-center">
                            <div class="text-sm font-medium text-yellow-800">üìä √öLTIMO CONCURSO TEVE:</div>
                            <div class="text-lg font-bold text-yellow-900">
                                <span id="tipo1UltimoConcurso" class="text-blue-600">5</span> VIT√ìRIAS VISITANTE + 
                                <span id="tipoXUltimoConcurso" class="text-gray-600">4</span> EMPATES + 
                                <span id="tipo2UltimoConcurso" class="text-red-600">5</span> VIT√ìRIAS MANDANTE
                            </div>
                            <div class="text-xs text-yellow-700">üëÜ Use como refer√™ncia para seus palpites (14 jogos)</div>
                        </div>
                        
                        <!-- Contador Visual Atual -->
                        <div class="grid grid-cols-3 gap-4 mb-4">
                            <div class="text-center p-4 bg-blue-100 rounded-lg border-2 border-blue-300">
                                <div class="text-4xl font-bold text-blue-600 contador-destaque" id="tipo1Atuais">0</div>
                                <div class="text-lg font-bold text-blue-700">VISITANTE</div>
                                <div class="text-sm text-blue-600">üéØ Meta: <span id="metaTipo1" class="font-bold">5</span></div>
                                <div class="text-xs text-blue-500">Resultado: 1</div>
                            </div>
                            <div class="text-center p-4 bg-gray-100 rounded-lg border-2 border-gray-300">
                                <div class="text-4xl font-bold text-gray-600 contador-destaque" id="tipoXAtuais">0</div>
                                <div class="text-lg font-bold text-gray-700">EMPATES</div>
                                <div class="text-sm text-gray-600">üéØ Meta: <span id="metaTipoX" class="font-bold">4</span></div>
                                <div class="text-xs text-gray-500">Resultado: X</div>
                            </div>
                            <div class="text-center p-4 bg-red-100 rounded-lg border-2 border-red-300">
                                <div class="text-4xl font-bold text-red-600 contador-destaque" id="tipo2Atuais">0</div>
                                <div class="text-lg font-bold text-red-700">MANDANTE</div>
                                <div class="text-sm text-red-600">üéØ Meta: <span id="metaTipo2" class="font-bold">5</span></div>
                                <div class="text-xs text-red-500">Resultado: 2</div>
                            </div>
                        </div>
                        
                        <!-- Status da Estrat√©gia -->
                        <div id="statusEstrategia" class="text-center p-3 rounded-lg font-bold text-lg bg-gray-100 text-gray-700">
                            ‚öΩ Selecione palpites para ver sua estrat√©gia
                        </div>
                        
                        <!-- Dica Din√¢mica -->
                        <div id="dicaEstrategia" class="mt-3 text-center text-sm bg-yellow-100 border border-yellow-300 rounded p-2 text-yellow-800">
                            üí° <strong>Dica:</strong> Na Loteca a distribui√ß√£o t√≠pica √© ~36% mandante, ~28% empate, ~36% visitante
                        </div>
                    </div>

                    <!-- An√°lise Complementar -->
                    <div id="analiseJogo" class="mb-4 p-3 bg-green-50 border border-green-200 rounded-lg">
                        <div class="text-sm font-medium text-green-800 mb-2">üìä An√°lise Complementar:</div>
                        <div class="grid grid-cols-3 gap-2 text-xs">
                            <div>Palpites: <span id="palpitesCount" class="font-bold">0/14</span></div>
                            <div>Tipo 1: <span id="tipo1Count" class="font-bold">0</span></div>
                            <div>Tipo X: <span id="tipoXCount" class="font-bold">0</span></div>
                        </div>
                        <div class="text-xs mt-1">
                            Tipo 2: <span id="tipo2Count" class="font-bold">0</span>
                        </div>
                        <div id="sugestaoDistribuicao" class="mt-2 text-xs text-green-700">
                            <!-- Sugest√£o de distribui√ß√£o -->
                        </div>
                    </div>

                    <!-- Lista de Jogos para Palpite -->
                    <div class="mb-4">
                        <label class="block text-loteca font-medium mb-3">Palpites dos 14 Jogos:</label>
                        <div id="listaJogosPalpite" class="space-y-3 max-h-80 overflow-y-auto">
                            <!-- Jogos para palpite ser√£o gerados aqui -->
                        </div>
                    </div>

                    <!-- Bot√µes de A√ß√£o -->
                    <div class="flex flex-wrap gap-2">
                        <button id="limparJogo" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg">
                            üóëÔ∏è Limpar
                        </button>
                        <button id="randomizarJogo" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg">
                            üé≤ Aleat√≥rio
                        </button>
                        <button id="adicionarJogo" class="bg-loteca hover:bg-loteca-dark text-white px-4 py-2 rounded-lg disabled:opacity-50">
                            ‚ûï Adicionar Jogo
                        </button>
                    </div>
                </div>

                <!-- Tabela de Probabilidades -->
                <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-blue-200">
                    <h3 class="text-lg font-bold text-blue-800 mb-4">üìä Probabilidades de Acerto</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-xs">
                            <thead class="bg-blue-100">
                                <tr>
                                    <th class="p-2 text-left">Acertos</th>
                                    <th class="p-2 text-right">Probabilidade</th>
                                    <th class="p-2 text-right">1 em X</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td class="p-1">14 acertos</td><td class="p-1 text-right">0,000002%</td><td class="p-1 text-right">4.782.969</td></tr>
                                <tr class="bg-gray-50"><td class="p-1">13 acertos</td><td class="p-1 text-right">0,000019%</td><td class="p-1 text-right">532.552</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-3 text-xs text-blue-600">
                        ‚öΩ <strong>Loteca:</strong> A loteria dos apaixonados por futebol brasileiro!
                    </div>
                </div>
            </div>

            <!-- LADO DIREITO: Visualiza√ß√£o dos Jogos -->
            <div class="space-y-6">
                <!-- Resumo e Controles -->
                <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-loteca">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-loteca">üìã Meus Jogos</h3>
                        <div class="flex items-center gap-2">
                            <label class="flex items-center text-sm">
                                <input type="checkbox" id="mostrarEstatisticas" class="mr-2" checked>
                                üìä Estat√≠sticas
                            </label>
                        </div>
                    </div>

                    <!-- Custo Total -->
                    <div class="mb-4">
                        <div class="custo-total text-center">
                            üí∞ Total: <span id="custoTotal">R$ 0,00</span>
                        </div>
                        <div class="text-center text-sm text-gray-600 mt-2">
                            <span id="totalJogos">0</span> jogo(s) adicionado(s)
                        </div>
                    </div>

                    <!-- Bot√µes de Download -->
                    <div class="grid grid-cols-3 gap-2 mb-4">
                        <button id="downloadHTML" class="bg-orange-500 hover:bg-orange-600 text-white px-3 py-2 rounded-lg text-sm">
                            üåê HTML
                        </button>
                        <button id="downloadTXT" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg text-sm" title="TXT: Agora minimalista - s√≥ resultados!">
                            üìÑ TXT
                        </button>
                        <button id="downloadXLSX" class="bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-lg text-sm">
                            üìä XLSX
                        </button>
                    </div>

                    <!-- Bot√£o Limpar Todos -->
                    <button id="limparTodos" class="w-full bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg">
                        üóëÔ∏è Limpar Todos os Jogos
                    </button>
                </div>

                <!-- Lista dos Jogos -->
                <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-gray-200 max-h-96 overflow-y-auto">
                    <h4 class="font-bold text-gray-800 mb-4">Lista de Jogos:</h4>
                    <div id="listaJogos">
                        <p class="text-gray-500 text-center py-8">Nenhum jogo adicionado ainda</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Como Funciona -->
        <div id="modalComoFunciona" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-lg shadow-lg max-w-4xl w-full mx-4 max-h-screen overflow-y-auto">
                <div class="bg-loteca text-white p-6 rounded-t-lg">
                    <h2 class="text-2xl font-bold text-center">‚öΩ Como Funciona a Loteca</h2>
                </div>
                
                <div class="p-6 space-y-6">
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <h3 class="text-xl font-bold text-blue-800 mb-3">üìã Passo a Passo:</h3>
                        <div class="space-y-3 text-blue-700">
                            <p><strong>1. Estrat√©gia de Distribui√ß√£o:</strong> Veja como os resultados se distribu√≠ram no √∫ltimo concurso</p>
                            <p><strong>2. Jogos reais:</strong> 14 jogos de futebol que acontecem no fim de semana</p>
                            <p><strong>3. Acompanhe o contador:</strong> Veja em tempo real sua distribui√ß√£o de palpites</p>
                            <p><strong>4. Tr√™s op√ß√µes:</strong> 1 (vit√≥ria visitante), X (empate), 2 (vit√≥ria mandante)</p>
                            <p><strong>5. An√°lise autom√°tica:</strong> Sabe se est√° seguindo a estrat√©gia estat√≠stica</p>
                            <p><strong>6. Download:</strong> Exporte seus palpites em HTML, TXT ou XLSX</p>
                        </div>
                    </div>

                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <h3 class="text-xl font-bold text-yellow-800 mb-3">‚öΩ Estrat√©gia de Distribui√ß√£o de Resultados (Loteca):</h3>
                        <div class="space-y-2 text-yellow-700">
                            <p><strong>üìä An√°lise estat√≠stica:</strong> Baseada na distribui√ß√£o t√≠pica do futebol brasileiro</p>
                            <p><strong>üéØ Meta din√¢mica:</strong> Baseada nos resultados do √∫ltimo concurso</p>
                            <p><strong>üìà Contador triplo:</strong> Veja claramente quantos 1, X e 2 selecionou</p>
                            <p><strong>‚úÖ Feedback inteligente:</strong> "Faltam: X visitante, Y empates" em tempo real</p>
                            <p><strong>üí° Distribui√ß√£o t√≠pica:</strong> ~36% mandante, ~28% empate, ~36% visitante</p>
                        </div>
                    </div>

                    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                        <h3 class="text-xl font-bold text-red-800 mb-3">‚öΩ Sistema de Resultados:</h3>
                        <div class="space-y-2 text-red-700">
                            <p><strong>1 (Azul):</strong> Vit√≥ria do time visitante (que joga fora de casa)</p>
                            <p><strong>X (Cinza):</strong> Empate entre os dois times</p>
                            <p><strong>2 (Vermelho):</strong> Vit√≥ria do time mandante (que joga em casa)</p>
                            <p><strong>Estrat√©gia:</strong> Analise o hist√≥rico dos times e situa√ß√£o no campeonato</p>
                            <p><strong>Dica:</strong> Jogos equilibrados t√™m mais chance de empate</p>
                        </div>
                    </div>

                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <h3 class="text-xl font-bold text-green-800 mb-3">üéØ An√°lise de Distribui√ß√£o:</h3>
                        <div class="space-y-2 text-green-700">
                            <p><strong>Como contamos:</strong> Quantos palpites de cada tipo (1, X, 2) voc√™ fez</p>
                            <p><strong>Distribui√ß√£o ideal:</strong> N√£o concentre tudo em um tipo de resultado</p>
                            <p><strong>Estrat√©gia equilibrada:</strong> Misture vit√≥rias e empates conforme os jogos</p>
                            <p><strong>Sugest√£o:</strong> Hist√≥rico mostra distribui√ß√£o m√©dia dos resultados</p>
                        </div>
                    </div>

                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                        <h3 class="text-xl font-bold text-purple-800 mb-3">üí∞ Sistema de Premia√ß√£o:</h3>
                        <div class="space-y-3">
                            <div class="bg-white p-3 rounded border border-purple-300">
                                <div class="text-sm font-medium text-purple-800 mb-2">üèÜ Apenas 2 Faixas:</div>
                                <div class="grid grid-cols-1 gap-2 text-xs text-purple-700">
                                    <div><strong>1¬∫ lugar (14 acertos):</strong> Pr√™mio m√°ximo (m√≠nimo R$ 500 mil)</div>
                                    <div><strong>2¬∫ lugar (13 acertos):</strong> Pr√™mio de consola√ß√£o</div>
                                </div>
                            </div>
                            
                            <div class="text-sm">
                                <div><strong>Valor da aposta:</strong> R$ 3,00 (fixo)</div>
                                <div><strong>Desenhos:</strong> Baseados nos jogos do fim de semana</div>
                                <div><strong>Maior diferencial:</strong> Pr√™mios dependem dos jogos reais!</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 px-6 py-4 rounded-b-lg text-center">
                    <button id="fecharModal" class="bg-loteca hover:bg-loteca-dark text-white font-medium py-2 px-6 rounded-lg">
                        ‚úÖ Entendi, Vamos Jogar!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Vari√°veis globais
        let ultimoResultado = null;
        let jogosAdicionados = [];
        let palpitesAtuais = {}; // {jogoId: resultado}
        let jogosDisponiveis = [];
        const quantidadeJogos = 14; // Loteca sempre tem 14 jogos
        const custoJogo = 3.00; // Loteca custa R$ 3,00

        // Inicializa√ß√£o da aplica√ß√£o
        document.addEventListener('DOMContentLoaded', async () => {
            await carregarUltimoResultado();
            inicializarInterface();
            configurarEventListeners();
        });

        // Carregar √∫ltimo resultado da Loteca
        async function carregarUltimoResultado() {
            try {
                const response = await fetch('https://servicebus2.caixa.gov.br/portaldeloterias/api/loteca');
                const data = await response.json();
                ultimoResultado = data;
                jogosDisponiveis = data.listaResultadoEquipeEsportiva || [];
                exibirUltimoResultado(data);
            } catch (error) {
                console.error('Erro ao carregar resultado:', error);
                // Usar dados de exemplo se a API falhar
                const dadosExemplo = {
                    numero: 1205,
                    dataApuracao: "04/08/2025",
                    dataProximoConcurso: "09/08/2025",
                    acumulado: true,
                    valorEstimadoProximoConcurso: 3500000.00,
                    listaRateioPremio: [
                        { descricaoFaixa: "1¬∫ (14 acertos)", numeroDeGanhadores: 0, valorPremio: 0 },
                        { descricaoFaixa: "2¬∫ (13 acertos)", numeroDeGanhadores: 1, valorPremio: 170254.63 }
                    ],
                    listaResultadoEquipeEsportiva: gerarJogosExemplo()
                };
                jogosDisponiveis = dadosExemplo.listaResultadoEquipeEsportiva;
                exibirUltimoResultado(dadosExemplo);
            } finally {
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('ultimoResultado').classList.remove('hidden');
                document.getElementById('interfacePrincipal').classList.remove('hidden');
            }
        }

        // Gerar jogos de exemplo
        function gerarJogosExemplo() {
            const times = ['FLAMENGO', 'CORINTHIANS', 'PALMEIRAS', 'S√ÉO PAULO', 'SANTOS', 'VASCO', 'BOTAFOGO', 'FLUMINENSE', 'GR√äMIO', 'INTERNACIONAL', 'CRUZEIRO', 'ATL√âTICO/MG', 'BAHIA', 'SPORT', 'CEAR√Å', 'FORTALEZA', 'GOI√ÅS', 'ATL√âTICO/GO'];
            const jogos = [];
            
            for (let i = 1; i <= 14; i++) {
                const timeUm = times[Math.floor(Math.random() * times.length)];
                let timeDois = times[Math.floor(Math.random() * times.length)];
                while (timeDois === timeUm) {
                    timeDois = times[Math.floor(Math.random() * times.length)];
                }
                
                const golUm = Math.floor(Math.random() * 4);
                const golDois = Math.floor(Math.random() * 4);
                
                jogos.push({
                    nuSequencial: i,
                    nomeEquipeUm: timeUm,
                    nomeEquipeDois: timeDois,
                    nuGolEquipeUm: golUm,
                    nuGolEquipeDois: golDois,
                    dtJogo: "02/08/2025",
                    diaSemana: i <= 7 ? "S√°bado" : "Domingo"
                });
            }
            
            return jogos;
        }

        // Exibir √∫ltimo resultado
        function exibirUltimoResultado(data) {
            document.getElementById('tituloResultado').textContent = `Concurso ${data.numero}`;
            document.getElementById('dataResultado').textContent = `üìÖ ${data.dataApuracao} (Domingo)`;

            // Jogos e resultados
            const jogosDiv = document.getElementById('jogosResultado');
            jogosDiv.innerHTML = '';
            
            if (jogosDisponiveis.length > 0) {
                jogosDisponiveis.forEach(jogo => {
                    const resultado = determinarResultado(jogo.nuGolEquipeUm, jogo.nuGolEquipeDois);
                    const jogoEl = document.createElement('div');
                    jogoEl.className = 'flex items-center justify-between p-2 bg-gray-50 rounded-lg text-sm';
                    jogoEl.innerHTML = `
                        <div class="flex-1">
                            <div class="font-medium">${jogo.nuSequencial}. ${jogo.nomeEquipeUm} x ${jogo.nomeEquipeDois}</div>
                            <div class="text-xs text-gray-600">${jogo.nuGolEquipeUm} x ${jogo.nuGolEquipeDois} - ${jogo.diaSemana}</div>
                        </div>
                        <div class="resultado-jogo resultado-${resultado}">${resultado}</div>
                    `;
                    jogosDiv.appendChild(jogoEl);
                });
            }

            // Status do concurso
            const ganhador14 = data.listaRateioPremio?.find(p => p.descricaoFaixa.includes("14 acertos"));
            if (ganhador14 && ganhador14.numeroDeGanhadores > 0) {
                document.getElementById('statusResultado').textContent = 
                    `${ganhador14.numeroDeGanhadores} GANHADOR${ganhador14.numeroDeGanhadores > 1 ? 'ES' : ''} COM 14 ACERTOS`;
                document.getElementById('statusResultado').className = 'text-lg font-bold mb-4 text-green-600 text-center';
            } else {
                document.getElementById('statusResultado').textContent = 'ACUMULOU!';
                document.getElementById('statusResultado').className = 'text-lg font-bold mb-4 text-red-600 text-center';
            }

            // Pr√≥ximo concurso
            document.querySelector('.text-2xl.font-bold.text-loteca').textContent = 
                `Pr√™mio Estimado: ${formatarMoeda(data.valorEstimadoProximoConcurso || 3500000)}`;

            // üéØ NOVA FUNCIONALIDADE PRINCIPAL: Analisar distribui√ß√£o de resultados do √∫ltimo concurso
            analisarDistribuicaoUltimoConcurso();
        }

        // üéØ NOVA FUNCIONALIDADE PRINCIPAL: Analisar distribui√ß√£o de resultados do √∫ltimo concurso
        function analisarDistribuicaoUltimoConcurso() {
            const tipos = { '1': 0, 'X': 0, '2': 0 };
            
            jogosDisponiveis.forEach(jogo => {
                const resultado = determinarResultado(jogo.nuGolEquipeUm, jogo.nuGolEquipeDois);
                tipos[resultado]++;
            });
            
            // Armazenar dados globalmente
            window.tipo1UltimoConcurso = tipos['1'];
            window.tipoXUltimoConcurso = tipos['X'];
            window.tipo2UltimoConcurso = tipos['2'];
            
            // üéØ ATUALIZAR INTERFACE COM OS DADOS ESTAT√çSTICOS
            document.getElementById('tipo1UltimoConcurso').textContent = tipos['1'];
            document.getElementById('tipoXUltimoConcurso').textContent = tipos['X'];
            document.getElementById('tipo2UltimoConcurso').textContent = tipos['2'];
            document.getElementById('metaTipo1').textContent = tipos['1'];
            document.getElementById('metaTipoX').textContent = tipos['X'];
            document.getElementById('metaTipo2').textContent = tipos['2'];
            
            console.log(`√öltimo concurso: Tipo1: ${tipos['1']}, TipoX: ${tipos['X']}, Tipo2: ${tipos['2']}`);
            atualizarContadorDistribuicao();
        }

        // Determinar resultado do jogo
        function determinarResultado(golUm, golDois) {
            if (golUm > golDois) return '1';
            if (golUm < golDois) return '2';
            return 'X';
        }

        // Inicializar interface
        function inicializarInterface() {
            criarListaJogosPalpite();
            atualizarContadorDistribuicao();
        }

        // üéØ NOVA FUNCIONALIDADE PRINCIPAL: Atualizar contador de distribui√ß√£o de resultados
        function atualizarContadorDistribuicao() {
            const tipos = { '1': 0, 'X': 0, '2': 0 };
            Object.values(palpitesAtuais).forEach(resultado => {
                tipos[resultado]++;
            });
            
            const metaTipo1 = window.tipo1UltimoConcurso || 5;
            const metaTipoX = window.tipoXUltimoConcurso || 4;
            const metaTipo2 = window.tipo2UltimoConcurso || 5;
            
            // Atualizar contadores visuais
            document.getElementById('tipo1Atuais').textContent = tipos['1'];
            document.getElementById('tipoXAtuais').textContent = tipos['X'];
            document.getElementById('tipo2Atuais').textContent = tipos['2'];
            
            // Aplicar anima√ß√£o de destaque
            document.getElementById('tipo1Atuais').classList.add('contador-destaque');
            document.getElementById('tipoXAtuais').classList.add('contador-destaque');
            document.getElementById('tipo2Atuais').classList.add('contador-destaque');
            
            setTimeout(() => {
                document.getElementById('tipo1Atuais').classList.remove('contador-destaque');
                document.getElementById('tipoXAtuais').classList.remove('contador-destaque');
                document.getElementById('tipo2Atuais').classList.remove('contador-destaque');
            }, 500);
            
            // üéØ AVALIAR ESTRAT√âGIA E MOSTRAR STATUS
            const totalPalpites = Object.keys(palpitesAtuais).length;
            const statusEl = document.getElementById('statusEstrategia');
            const dicaEl = document.getElementById('dicaEstrategia');
            
            if (totalPalpites === 0) {
                statusEl.textContent = '‚öΩ Selecione palpites para ver sua estrat√©gia';
                statusEl.className = 'text-center p-3 rounded-lg font-bold text-lg bg-gray-100 text-gray-700';
                dicaEl.innerHTML = 'üí° <strong>Dica:</strong> Na Loteca a distribui√ß√£o t√≠pica √© ~36% mandante, ~28% empate, ~36% visitante';
            } else {
                // Avaliar se est√° seguindo a estrat√©gia
                const diferencaTipo1 = Math.abs(tipos['1'] - metaTipo1);
                const diferencaTipoX = Math.abs(tipos['X'] - metaTipoX);
                const diferencaTipo2 = Math.abs(tipos['2'] - metaTipo2);
                
                if (totalPalpites < 14) {
                    // Ainda selecionando
                    const tipo1Restantes = Math.max(0, metaTipo1 - tipos['1']);
                    const tipoXRestantes = Math.max(0, metaTipoX - tipos['X']);
                    const tipo2Restantes = Math.max(0, metaTipo2 - tipos['2']);
                    
                    if (tipo1Restantes > 0 || tipoXRestantes > 0 || tipo2Restantes > 0) {
                        let faltam = [];
                        if (tipo1Restantes > 0) faltam.push(`${tipo1Restantes} visitante`);
                        if (tipoXRestantes > 0) faltam.push(`${tipoXRestantes} empates`);
                        if (tipo2Restantes > 0) faltam.push(`${tipo2Restantes} mandante`);
                        
                        statusEl.textContent = `üìç Faltam: ${faltam.join(', ')}`;
                        statusEl.className = 'text-center p-3 rounded-lg font-bold text-lg bg-blue-100 text-blue-800';
                        dicaEl.innerHTML = `üí° <strong>Continue:</strong> Selecione mais ${faltam.join(', ')} para seguir a estrat√©gia`;
                    } else {
                        statusEl.textContent = '‚úÖ Estrat√©gia completa! Continue selecionando...';
                        statusEl.className = 'text-center p-3 rounded-lg font-bold text-lg bg-yellow-100 text-yellow-800';
                        dicaEl.innerHTML = `üí° <strong>Perfeito:</strong> Voc√™ j√° tem a distribui√ß√£o ideal!`;
                    }
                } else {
                    // 14 palpites selecionados - avaliar resultado final
                    const tolerancia = 1; // toler√¢ncia de 1 para cada tipo
                    
                    if (diferencaTipo1 <= tolerancia && diferencaTipoX <= tolerancia && diferencaTipo2 <= tolerancia) {
                        statusEl.textContent = '‚öΩ ESTRAT√âGIA PERFEITA! Distribui√ß√£o similar ao √∫ltimo concurso';
                        statusEl.className = 'text-center p-3 rounded-lg font-bold text-lg bg-green-200 text-green-800 meta-atingida';
                        dicaEl.innerHTML = `üèÜ <strong>Excelente:</strong> Sua distribui√ß√£o segue o padr√£o do √∫ltimo concurso!`;
                    } else if (diferencaTipo1 <= 2 && diferencaTipoX <= 2 && diferencaTipo2 <= 2) {
                        statusEl.textContent = '‚úÖ Estrat√©gia muito boa! Distribui√ß√£o pr√≥xima';
                        statusEl.className = 'text-center p-3 rounded-lg font-bold text-lg bg-green-100 text-green-800';
                        dicaEl.innerHTML = `üëç <strong>Bom:</strong> Sua distribui√ß√£o est√° pr√≥xima da estat√≠stica`;
                    } else {
                        statusEl.textContent = '‚ö†Ô∏è Estrat√©gia diferente do padr√£o estat√≠stico';
                        statusEl.className = 'text-center p-3 rounded-lg font-bold text-lg bg-red-100 text-red-800 meta-excedida';
                        dicaEl.innerHTML = `‚ö° <strong>Aten√ß√£o:</strong> Distribui√ß√£o muito diferente do √∫ltimo concurso`;
                    }
                }
            }
            
            // Atualizar an√°lise complementar
            atualizarAnaliseJogo();
        }

        // Criar lista de jogos para palpite
        function criarListaJogosPalpite() {
            const lista = document.getElementById('listaJogosPalpite');
            lista.innerHTML = '';
            
            // Se n√£o temos jogos reais, criar jogos gen√©ricos
            if (jogosDisponiveis.length === 0) {
                for (let i = 1; i <= 14; i++) {
                    jogosDisponiveis.push({
                        nuSequencial: i,
                        nomeEquipeUm: `TIME ${String.fromCharCode(64 + i)}`,
                        nomeEquipeDois: `TIME ${String.fromCharCode(64 + i + 1)}`,
                        dtJogo: "Pr√≥ximo fim de semana",
                        diaSemana: i <= 7 ? "S√°bado" : "Domingo"
                    });
                }
            }
            
            jogosDisponiveis.forEach((jogo, index) => {
                const jogoDiv = document.createElement('div');
                jogoDiv.className = 'jogo-loteca';
                
                jogoDiv.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex-1">
                            <div class="font-bold text-loteca">${jogo.nuSequencial}. ${jogo.nomeEquipeUm} x ${jogo.nomeEquipeDois}</div>
                            <div class="text-xs text-gray-600">${jogo.dtJogo} - ${jogo.diaSemana}</div>
                        </div>
                    </div>
                    <div class="flex justify-center gap-2">
                        <div class="opcao-resultado opcao-1" data-jogo="${index}" data-resultado="1">1</div>
                        <div class="opcao-resultado opcao-x" data-jogo="${index}" data-resultado="X">X</div>
                        <div class="opcao-resultado opcao-2" data-jogo="${index}" data-resultado="2">2</div>
                    </div>
                `;
                
                lista.appendChild(jogoDiv);
            });
            
            // Adicionar event listeners
            document.querySelectorAll('.opcao-resultado').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const jogo = e.target.dataset.jogo;
                    const resultado = e.target.dataset.resultado;
                    selecionarResultado(jogo, resultado);
                });
            });
        }

        // Selecionar resultado de um jogo
        function selecionarResultado(jogoIndex, resultado) {
            // Limpar sele√ß√£o anterior deste jogo
            document.querySelectorAll(`[data-jogo="${jogoIndex}"]`).forEach(btn => {
                btn.classList.remove('selecionado');
            });
            
            // Selecionar nova op√ß√£o
            document.querySelector(`[data-jogo="${jogoIndex}"][data-resultado="${resultado}"]`).classList.add('selecionado');
            
            // Atualizar palpites
            palpitesAtuais[jogoIndex] = resultado;
            
            atualizarContadorDistribuicao();
            validarBotaoAdicionar();
        }

        // Atualizar an√°lise do jogo atual
        function atualizarAnaliseJogo() {
            const totalPalpites = Object.keys(palpitesAtuais).length;
            document.getElementById('palpitesCount').textContent = `${totalPalpites}/${quantidadeJogos}`;
            
            // Contar tipos de palpites
            const tipos = { '1': 0, 'X': 0, '2': 0 };
            Object.values(palpitesAtuais).forEach(resultado => {
                tipos[resultado]++;
            });
            
            document.getElementById('tipo1Count').textContent = tipos['1'];
            document.getElementById('tipoXCount').textContent = tipos['X'];
            document.getElementById('tipo2Count').textContent = tipos['2'];
            
            // Sugest√£o de distribui√ß√£o
            const sugestaoEl = document.getElementById('sugestaoDistribuicao');
            if (totalPalpites === 0) {
                sugestaoEl.textContent = 'Distribua equilibradamente: ~5 vit√≥rias mandante, ~4 empates, ~5 vit√≥rias visitante.';
            } else if (totalPalpites < 14) {
                sugestaoEl.textContent = `Faltam ${14 - totalPalpites} palpites. Atual: ${tipos['1']} tipo-1, ${tipos['X']} empates, ${tipos['2']} tipo-2.`;
            } else {
                sugestaoEl.textContent = `Distribui√ß√£o final: ${tipos['1']} tipo-1, ${tipos['X']} empates, ${tipos['2']} tipo-2 ‚úÖ`;
            }
        }

        // Validar bot√£o adicionar
        function validarBotaoAdicionar() {
            const btn = document.getElementById('adicionarJogo');
            btn.disabled = Object.keys(palpitesAtuais).length !== quantidadeJogos;
        }

        // Configurar event listeners
        function configurarEventListeners() {
            // Bot√µes de a√ß√£o do jogo
            document.getElementById('limparJogo').addEventListener('click', limparSelecao);
            document.getElementById('randomizarJogo').addEventListener('click', randomizarJogo);
            document.getElementById('adicionarJogo').addEventListener('click', adicionarJogo);
            
            // Controles dos jogos
            document.getElementById('mostrarEstatisticas').addEventListener('change', atualizarVisualizacaoJogos);
            document.getElementById('limparTodos').addEventListener('click', limparTodosJogos);
            
            // Downloads
            document.getElementById('downloadHTML').addEventListener('click', () => downloadJogos('html'));
            document.getElementById('downloadTXT').addEventListener('click', () => downloadJogos('txt'));
            document.getElementById('downloadXLSX').addEventListener('click', () => downloadJogos('xlsx'));
            
            // Modal
            document.getElementById('comoFuncionaBtn').addEventListener('click', () => {
                document.getElementById('modalComoFunciona').classList.remove('hidden');
            });
            document.getElementById('fecharModal').addEventListener('click', () => {
                document.getElementById('modalComoFunciona').classList.add('hidden');
            });
        }

        // Limpar sele√ß√£o atual
        function limparSelecao() {
            palpitesAtuais = {};
            document.querySelectorAll('.opcao-resultado').forEach(btn => {
                btn.classList.remove('selecionado');
            });
            atualizarContadorDistribuicao();
            validarBotaoAdicionar();
        }

        // Randomizar jogo
        function randomizarJogo() {
            limparSelecao();
            const opcoes = ['1', 'X', '2'];
            
            for (let i = 0; i < quantidadeJogos; i++) {
                const resultado = opcoes[Math.floor(Math.random() * opcoes.length)];
                selecionarResultado(i, resultado);
            }
            
            atualizarContadorDistribuicao();
            validarBotaoAdicionar();
        }

        // Adicionar jogo √† lista
        function adicionarJogo() {
            if (Object.keys(palpitesAtuais).length !== quantidadeJogos) return;
            
            // Criar array ordenado de palpites
            const palpitesOrdenados = [];
            for (let i = 0; i < quantidadeJogos; i++) {
                palpitesOrdenados.push(palpitesAtuais[i]);
            }
            
            const jogo = {
                id: Date.now(),
                palpites: [...palpitesOrdenados],
                custo: custoJogo,
                tipos: (() => {
                    const tipos = { '1': 0, 'X': 0, '2': 0 };
                    palpitesOrdenados.forEach(resultado => {
                        tipos[resultado]++;
                    });
                    return tipos;
                })()
            };
            
            jogosAdicionados.push(jogo);
            limparSelecao();
            atualizarVisualizacaoJogos();
            atualizarCustoTotal();
        }

        // Atualizar visualiza√ß√£o dos jogos
        function atualizarVisualizacaoJogos() {
            const lista = document.getElementById('listaJogos');
            const mostrarEstatisticas = document.getElementById('mostrarEstatisticas').checked;
            
            if (jogosAdicionados.length === 0) {
                lista.innerHTML = '<p class="text-gray-500 text-center py-8">Nenhum jogo adicionado ainda</p>';
                return;
            }
            
            lista.innerHTML = '';
            jogosAdicionados.forEach((jogo, index) => {
                const jogoDiv = document.createElement('div');
                jogoDiv.className = 'jogo-card';
                
                jogoDiv.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-bold text-loteca">Jogo ${index + 1}</span>
                        <div class="flex gap-2">
                            ${mostrarEstatisticas ? `
                                <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">${jogo.tipos['1']}V</span>
                                <span class="px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded">${jogo.tipos['X']}E</span>
                                <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded">${jogo.tipos['2']}M</span>
                            ` : ''}
                            <button onclick="removerJogo(${jogo.id})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                    <div class="grid grid-cols-7 gap-1 mb-2">
                        ${jogo.palpites.map((palpite, i) => 
                            `<div class="resultado-jogo resultado-${palpite}" title="Jogo ${i + 1}: ${palpite}">${palpite}</div>`
                        ).join('')}
                    </div>
                    <div class="text-sm text-gray-600">
                        14 palpites - ${formatarMoeda(jogo.custo)}${mostrarEstatisticas ? ` | ${jogo.tipos['1']} visitante, ${jogo.tipos['X']} empates, ${jogo.tipos['2']} mandante` : ''}
                    </div>
                `;
                
                lista.appendChild(jogoDiv);
            });
        }

        // Remover jogo espec√≠fico
        function removerJogo(id) {
            jogosAdicionados = jogosAdicionados.filter(jogo => jogo.id !== id);
            atualizarVisualizacaoJogos();
            atualizarCustoTotal();
        }

        // Limpar todos os jogos
        function limparTodosJogos() {
            if (jogosAdicionados.length === 0) return;
            
            // Modal customizado ao inv√©s de confirm()
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white p-6 rounded-lg shadow-lg max-w-sm w-full mx-4">
                    <p class="text-gray-700 mb-4">Tem certeza que deseja remover todos os jogos?</p>
                    <div class="flex justify-end space-x-3">
                        <button id="cancelarLimpar" class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded">Cancelar</button>
                        <button id="confirmarLimpar" class="px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded">Confirmar</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            document.getElementById('cancelarLimpar').onclick = () => {
                document.body.removeChild(modal);
            };
            document.getElementById('confirmarLimpar').onclick = () => {
                jogosAdicionados = [];
                atualizarVisualizacaoJogos();
                atualizarCustoTotal();
                document.body.removeChild(modal);
            };
        }

        // Atualizar custo total
        function atualizarCustoTotal() {
            const total = jogosAdicionados.length * custoJogo;
            document.getElementById('custoTotal').textContent = formatarMoeda(total);
            document.getElementById('totalJogos').textContent = jogosAdicionados.length;
        }

        // Formatar valor monet√°rio
        function formatarMoeda(valor) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(valor);
        }

        // Downloads
        function downloadJogos(formato) {
            if (jogosAdicionados.length === 0) {
                // Modal customizado ao inv√©s de alert()
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="bg-white p-6 rounded-lg shadow-lg max-w-sm w-full mx-4">
                        <p class="text-gray-700 mb-4">Adicione pelo menos um jogo antes de fazer o download!</p>
                        <div class="flex justify-end">
                            <button class="px-4 py-2 bg-blue-500 text-white hover:bg-blue-600 rounded" onclick="this.closest('.fixed').remove()">OK</button>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
                return;
            }
            
            switch (formato) {
                case 'html':
                    downloadHTML(jogosAdicionados);
                    break;
                case 'txt':
                    downloadTXT(jogosAdicionados);
                    break;
                case 'xlsx':
                    downloadXLSX(jogosAdicionados);
                    break;
            }
        }

        // Download HTML
        function downloadHTML(jogos) {
            const total = jogos.length * custoJogo;
            const data = new Date().toLocaleDateString('pt-BR');
            
            let html = `<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Loteca - Meus Jogos</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .header { text-align: center; margin-bottom: 30px; color: white; background: #0066B3; padding: 20px; border-radius: 10px; }
        .jogo { margin: 10px 0; padding: 15px; border: 2px solid #0066B3; border-radius: 8px; }
        .palpite { display: inline-block; width: 30px; height: 30px; color: white; 
                  border-radius: 6px; text-align: center; line-height: 30px; margin: 2px; font-weight: bold; font-size: 14px; }
        .palpite-1 { background: #0066B3; }
        .palpite-x { background: #6b7280; }
        .palpite-2 { background: #F81A03; }
        .total { text-align: center; margin-top: 20px; font-size: 18px; font-weight: bold; color: #0066B3; }
        .distribuicao { font-size: 12px; color: #666; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚öΩ LOTECA - MEUS JOGOS</h1>
        <p>Gerado em: ${data}</p>
    </div>`;
            
            jogos.forEach((jogo, index) => {
                html += `
    <div class="jogo">
        <h3>Jogo ${index + 1} - 14 palpites - ${formatarMoeda(jogo.custo)}</h3>
        <div>
            ${jogo.palpites.map((palpite, i) => 
                `<span class="palpite palpite-${palpite.toLowerCase()}" title="Jogo ${i + 1}">${palpite}</span>`
            ).join('')}
        </div>
        <div class="distribuicao">
            Distribui√ß√£o: ${jogo.tipos['1']} visitante, ${jogo.tipos['X']} empates, ${jogo.tipos['2']} mandante
        </div>
    </div>`;
            });
            
            html += `
    <div class="total">
        Total: ${jogos.length} jogo(s) - ${formatarMoeda(total)}
    </div>
</body>
</html>`;
            
            baixarArquivo(html, 'loteca-jogos.html', 'text/html');
        }

        // Download TXT - Somente palpites
        function downloadTXT(jogos) {
            let txt = '';
            
            jogos.forEach((jogo, index) => {
                txt += jogo.palpites.join(' ');
                if (index < jogos.length - 1) {
                    txt += '\n';
                }
            });
            
            baixarArquivo(txt, 'loteca-jogos.txt', 'text/plain');
        }

        // Download XLSX
        function downloadXLSX(jogos) {
            const dados = [
                ['Jogo', 'Palpites', 'Visitante (1)', 'Empates (X)', 'Mandante (2)', 'Custo']
            ];
            
            jogos.forEach((jogo, index) => {
                dados.push([
                    `Jogo ${index + 1}`,
                    jogo.palpites.join(' - '),
                    jogo.tipos['1'],
                    jogo.tipos['X'],
                    jogo.tipos['2'],
                    jogo.custo
                ]);
            });
            
            const total = jogos.length * custoJogo;
            dados.push(['', 'TOTAL:', '', '', jogos.length + ' jogo(s)', total]);
            
            const ws = XLSX.utils.aoa_to_sheet(dados);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Loteca');
            XLSX.writeFile(wb, 'loteca-jogos.xlsx');
        }

        // Fun√ß√£o auxiliar para baixar arquivo
        function baixarArquivo(conteudo, nomeArquivo, tipoMime) {
            const blob = new Blob([conteudo], { type: tipoMime });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = nomeArquivo;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>